<!DOCTYPE html><meta charset="utf-8"><title></title><meta name="author" content="Chris Yip"><meta name="description" content="undefined"><meta name="keywords" content="iOS, JavaScript, HTML, CSS, Objective-C, Freelancer, Web Development, Mobile Development, Mac, OS X, Mac Development, Development, 前端开发, 移动开发, Ruby"><meta property="og:site_name" content="I'm Chris"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"><link rel="shortcut icon" href="/favicon.ico"><link rel="alternate" href="/atom.xml" title="I'm Chris" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen"><script async src="/js/theme.js"></script><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-15420910-3"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script><!--[if IE]><div style="width:100%;position:fixed;top:0;left:0;background:#f00;color:#fff;text-align:center">Internet Explorer series are not supported.</div><![endif]--><header id="header" class="inner page-header"><h1><a href="/">I'm Chris</a></h1><div class="menubar"><nav id="header-menu" class="header-menu"><a class="toggle-menu">Menu</a><ul><li><a href="/about" class="menu-item">About</a></li><li><a href="/archives" class="menu-item">Archives</a></li><li><a href="/works" class="menu-item">Works</a></li></ul></nav><form action="http://google.com/search" method="get" class="search"><input name="q" autocomplete="off" class="search-field"><input type="hidden" name="q" value="site:chrisyip.im"><a class="button"></a></form><div class="follow_me"><a href="https://github.com/chrisyip" title="GitHub" class="github">GitHub</a><a href="https://twitter.com/chrisyipw" title="Twitter" class="twitter">Twitter</a><a href="/atom.xml" title="RSS" class="rss">RSS</a></div></div></header><div id="content" class="inner content"><article class=""><header class="entry-header"><h2 class="title"><a href="/post/akins-laws-of-spacecraft-design/">《航天飞机设计定律》摘录</a></h2></header><div class="entry-content"><p>最近看了一篇文章，叫《<a href="http://www.aqee.net/akins-laws-of-spacecraft-design/">航天飞机设计定律</a>》，其中有些也适用于学习和工作，特摘录于此：</p>
<ol>
<li>工程设计的实现依赖数据。没有数据的分析只是一种观点。</li>
<li>正确的设计出航天飞机需要你付出无限的努力。这就是为什么最好要考虑当遇到故障时的处理办法。</li>
<li>设计是一种迭代的过程。必要的迭代次数是在你目前正在做的次数上加一。在任何时候都是这样。</li>
<li>你付出最大努力做出的最好设计不可避免的会在最终的设计中变得毫无用处。要学会在失望中生存。</li>
<li>自然界中，最好的通常会在中部。对那些出现在极端点的最好的东西持怀疑态度。</li>
<li>没有足够的需要的信息永远不能成为令人信服的不开始分析的借口。</li>
<li>有怀疑，进行判断。情况紧急，那就猜测。但一定要在真实数据出来后重新进行整理，清理错误。</li>
<li>有时，最快的得到结果的方法是丢掉所有的东西，重新开始。</li>
<li>问题永远不会只有一种解决方案。尽管有很多是错误的。</li>
<li>设计要基于需求。不会有任何的理由可以让设计出的东西要比需求要求的“更好”。</li>
<li>（Edison 定律）“更好”是”好”的敌人。</li>
<li>（Shea 定律）改进一个设计切入点主要是体现在接口上。这也是主要的把事情搞砸的地方。</li>
<li>之前做过相似分析的人并没有一个直接的途径将他的智慧穿越岁月传递。因此没有理由相信他们的分析而不相信你的。更没有理由把他们的分析用在你的分析中。</li>
<li>出现在打印刊物中的分析事实上跟它们的正确性很可能没有关系。</li>
<li>过往经历是一种极好的判断设计是否现实的能力。但过于现实同样会毁了一个在其它方面有价值的设计。</li>
<li>机遇会严重的阻挡你成为比同领域里其它人聪明万倍的人。如果你的分析说你的最大速度是光速的两倍，你很可能发明了曲速引擎（warp drive），但更有可能的是你被怀疑有精神病。</li>
<li>一个坏的设计但有好的表现形式，它最终会被判死刑。一个好的设计但表现形式糟糕，它会被判死刑立即执行。</li>
<li>（Larrabee 定律）你在课堂里听到的东西有一半都是垃圾。教育的目的是来让你知道哪一半是垃圾。</li>
<li>有疑问，写下来。</li>
<li>给开发定计划总像是在虚构一个小说，直到当你的客户因为你没有按计划完成而炒了你时你才知道它的意义。</li>
<li>（Bowden 定律）寻找测试失败的可能，永远可能改进你的分析设计，这显示了你真的进行了边界分析。</li>
<li>（Montemerlo 定律）不要做哑巴。</li>
<li>（Varsi 定律）日程表只会向一个方向进行。</li>
<li>（Tiesenhausen 定律）为了能精确的估计出最终开发程序需要的投入，你需要把最初估计时间乘以 π，把估计出的成本上的小数点向右移一位。</li>
<li>（Tiesenhausen 定律）如果你愿意往一个新设计的系统中投入最大的精力，那就学习绘画。工程师设计出的飞行器最终会看起来有些艺术概念。</li>
<li>（Mo 定律）你不可能通过爬到更高的树上来到达月亮。</li>
<li>太空是一个绝对无情的环境。如果你工程出了问题，有人会死（而且尽管你的分析大部分都是对的，也不会有任何的功劳…）</li>
</ol>
</div><footer class="entry-footer"><time datetime="2013-04-15T11:58:16.000Z">Apr 15th, 2013</time></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="/post/google-and-mozilla-working-on-new-browser-engines/">Google 和 Mozilla 宣布开发新的浏览器引擎，后 IE 时代来临？</a></h2></header><div class="entry-content"><p>在昨天（2013 年 4 月 3 日），Google 和 Mozilla 分别宣布要开发新的浏览器引擎，分别命名为 <a href="http://blog.chromium.org/2013/04/blink-rendering-engine-for-chromium.html">Blink</a> 和 <a href="https://blog.mozilla.org/blog/2013/04/03/mozilla-and-samsung-collaborate-on-next-generation-web-browser-engine/">Servo</a>。</p>
<p>Chromium 开发新引擎属于意料之中的事，毕竟 Google 的野心是称霸桌面（Chrome OS）和移动端（Android），不够强劲的引擎是不能满足他们的需求的。</p>
<p>Mozilla 开发新引擎就属于被迫无奈，好不容易在 IE 6 时代成功推广了 CSS3 等概念，让市场份额慢慢赶了上来，却被 WebKit 系列渔翁得利，Apple 和 Google 都是要资源有资源、要平台有平台的主，乔大爷一说 iOS 只能有 WebKit，Mozilla 奈何得了么？接着又因 Chrome 的快速启动、安装插件无需重启、强制静默更新等等措施而使 Firefox 从藐视 IE 的地位变成被藐视的处境（joking :P）。Opera 也是处于这样的窘境，最后妥协<a href="http://my.opera.com/ODIN/blog/300-million-users-and-move-to-webkit">换用 WebKit 引擎</a>。</p>
<p>Mozilla 顺利勾搭上三星这个有平台没资源的主也就顺理成章了。三星很明白跟着 Google 和微软混很难保证前景，比如 Android 阵营被 Apple 控告 Google 就爱莫能助，比如 Google 也大肆推广自有的 Android 品牌并收紧自由度，比如 Nokia 刚和微软合作没多久微软就宣布 WP 7 不能升 8，各种卖队友啊，所以三星一直没放弃拥有自主的平台。OS 虽然易做，但整个生态构建就很难，你必须保证开发者容易进入才能让这个生态健康成长——像 Android 使用 Java 作为开发语言就备受诟病，另一方面，由于 HTML5 的强势发展，三星很有可能希望有一套引擎来作为底层，就像 WebOS 那样——虽然不知道为什么不使用 WebKit 和 V8 而选择自主开发，可能担心会受限吧。总而言之，Mozilla 迫切地需要平台和资源，三星迫切地需要找到除 Android 和 WP 之外的出路。</p>
<p>个人而言，我并不关心谁开发新引擎、为什么开发新引擎，就像我在 Twitter 上<a href="https://twitter.com/chrisyipw/status/319697287263707136">说的</a>：</p>
<blockquote>
<p>其实哪个引擎我都不喜欢，搞一个强悍又标准的像 IE 6 那样垄断就好了（开发者心声</p>
</blockquote>
<p>这真的是心声，我真的烦透了这样的事情：</p>
<pre><code><span class="tag">div</span> <span class="rules">{
  <span class="rule"><span class="attribute">-webkit-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">-moz-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">-ms-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">user-select</span>:<span class="value"> none;</span></span>
<span class="rule">}</span></span>
</code></pre>

<pre><code><span class="keyword">var</span> matches = (<span class="keyword">function</span>(){
  <span class="keyword">var</span> m = document.body.webkitMatchesSelector ||
          document.body.mozMatchesSelector ||
          document.body.oMatchesSelector ||
          document.body.msMatchesSelector ||
          document.body.matchesSelector
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">( elem, sel )</span> {</span>
    m.call( elem, sel )
  };
})()
</code></pre>

<p>未来就可能这样：</p>
<pre><code><span class="tag">div</span> <span class="rules">{
  <span class="rule"><span class="attribute">-webkit-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">-blink-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">-whatever-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">-moz-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">-ms-user-select</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">user-select</span>:<span class="value"> none;</span></span>
<span class="rule">}</span></span>
</code></pre>

<pre><code><span class="keyword">var</span> matches = (<span class="keyword">function</span>(){
  <span class="keyword">var</span> m = document.body.webkitMatchesSelector ||
          document.body.mozMatchesSelector ||
          document.body.oMatchesSelector ||
          document.body.msMatchesSelector ||
          document.body.blinkMatchesSelector ||
          document.body.whateverMatchesSelector ||
          document.body.matchesSelector
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">( elem, sel )</span> {</span>
    m.call( elem, sel )
  };
})()
</code></pre>

<p>是不是想起了 IE 6 时代？</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">getXMLHttpRequestObject</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> ref = <span class="literal">null</span>;
  <span class="keyword">if</span> (window.XMLHttpRequest) {
      ref = <span class="keyword">new</span> XMLHttpRequest();
  } <span class="keyword">else</span> <span class="keyword">if</span> (window.ActiveXObject) { <span class="comment">// Older IE.</span>
      ref = <span class="keyword">new</span> ActiveXObject(<span class="string">"MSXML2.XMLHTTP.3.0"</span>);
  }
  <span class="keyword">return</span> ref;
}
</code></pre>

<p>此外，@<a href="https://twitter.com/ikarienator">ikarienator</a> <a href="https://twitter.com/ikarienator/status/319690212441731073">提到</a>：</p>
<blockquote>
<p>WebKit 虽然名义上是 Apple 的项目，实际上代码量上 Google 的人是 Apple 的两倍多。所以如果 Google 的人离开 WebKit，那么 WebKit 的更新就必须依赖 Apple 投入更多人力了。总不能永远让他坐享其成。</p>
</blockquote>
<p>我不认为 Apple 会把 Safari 迁移到新的引擎，至少会继续使用 WebKit 很长一段时间，那，缺少了 Google 的贡献，本来就比 Chrome 更新慢的 Safari 会变成怎样呢，也是一个未知问题。</p>
</div><footer class="entry-footer"><time datetime="2013-04-04T06:10:22.000Z">Apr 4th, 2013</time><div class="tags"><a href="/tags/browser/">Browser</a><a href="/tags/browser-engine/">Browser Engine</a><a href="/tags/chromium/">Chromium</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="/post/nimble-quest/">Nimble Quest：贪食蛇版 RPG 游戏</a></h2></header><div class="entry-content"><p>最近发现一款好玩的小游戏——Nimble Quest。</p>
<p><img src="/bimg/nimble-quest.jpg" alt="Nimble Quest"></p>
<p>玩的方式和 Nokia 手机经典游戏贪食蛇一样，通过滑动手指或方向键（OS X）来控制方向，规则也和贪食蛇一样，撞到障碍物人物会死亡，只不过由于融合了 RPG 要素，每个角色都有自己的血量，撞到障碍物或血量降到 0 就会死亡，而排头的队长死亡则 Game Over。</p>
<p>Nimble Quest 采用 IAP 收费，但是玩起来可以一分钱也不花，没有广告。游戏内类货币的物件分为两个，一个是宝石，一个为 token。宝石通过游戏内收集，用于升级角色和辅助道具；token 则可 IAP 购买，游戏过程中有极低机率掉落，主要用于 Game Over 时继续游戏或者购买队伍人员上限。</p>
<p>角色的解锁只要顺利推进进度即可，当然也可以 IAP 购买，而 Game Over 时如果不用 token 继续游戏就需要从头开始打，如果觉得进度不错，建议直接用 token 继续吧。</p>
<p>角色的升级有两个途径，杀怪和使用宝石。</p>
<p>作为一款悠闲小游，很适合无聊时玩玩；同时提供 iOS 和 Mac 版本：</p>
<p>iOS：<a href="https://itunes.apple.com/cn/app/id583638819?mt=8"><a href="https://itunes.apple.com/cn/app/id583638819?mt=8">https://itunes.apple.com/cn/app/id583638819?mt=8</a></a></p>
<p>Mac：<a href="https://itunes.apple.com/cn/app/id598685044?mt=12"><a href="https://itunes.apple.com/cn/app/id598685044?mt=12">https://itunes.apple.com/cn/app/id598685044?mt=12</a></a></p>
</div><footer class="entry-footer"><time datetime="2013-04-01T06:11:01.000Z">Apr 1st, 2013</time><div class="tags"><a href="/tags/ios/">iOS</a><a href="/tags/os-x/">OS X</a><a href="/tags/game/">Game</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="/post/html5-storage-apis/">HTML5 Storage APIs</a></h2></header><div class="entry-content"><p>因为太久没用这些东西，之前被人问起时只能勉强答出两个，并且连事件也不记得，只好把常用的列出来强化记忆了。</p>
<p><code>localStorage</code> 和 <code>sessionStorage</code> 的 APIs 在行为表现上是一致的，以下以 <code>localStorage</code> 为例，而 <code>globalStorage</code> 因为不是标准，所以略过。</p>
<h3>函数和属性:</h3>
<h4><code>setItem(key, value)</code></h4>
<p>将 <code>value</code> 以 <code>key</code> 为名存入 <code>localStorage</code>。</p>
<p><code>key</code> 和 <code>value</code> 理论上可接受任何类型，但实际会通过 <code>String(value)</code> 转换为字符串，所以需慎用，比如 <code>Object</code> 会转换成 <code>&#39;[object Object]&#39;</code>，<code>null</code> 会转换成 <code>&#39;null&#39;</code>。</p>
<pre><code>localStorage.setItem(<span class="string">'hello'</span>, <span class="string">'Chris'</span>)
localStorage.key(<span class="number">0</span>) + <span class="string">' '</span> + localStorage.getItem(<span class="string">'hello'</span>) <span class="comment">// 'hello Chris'</span>

localStorage.clear()
<span class="keyword">var</span> obj = { str: <span class="string">'an object'</span> }
localStorage.setItem(obj, { posts: [{}, {}] })
localStorage.key(<span class="number">0</span>) <span class="comment">// '[object Object]'</span>
localStorage.getItem(obj) <span class="comment">// '[object Object]'</span>
<span class="keyword">var</span> otherObj = { str: <span class="string">'another object'</span> }
localStorage.setItem(otherObj, <span class="literal">true</span>)
localStorage.getItem(obj) <span class="comment">// 'true'</span>

localStorage.clear()
localStorage.setItem(<span class="literal">null</span>, <span class="literal">null</span>)
localStorage.getItem(<span class="literal">null</span>) <span class="comment">// 'null'</span>
</code></pre>

<h4><code>getItem(key)</code></h4>
<p>要注意 <code>String()</code> 的问题。</p>
<p>若 <code>key</code> 不存在，<code>getItem()</code> 会返回 <code>null</code>，如果在 <code>setItem()</code> 时并没有进行严格验证的话，建议同时判断是否为 <code>&#39;null&#39;</code> 来确定是否存在。</p>
<h4>访问 key/value 的其他方法</h4>
<p><code>localStorage</code> 可以像数组一样操作，而 <code>key</code> 也会作为普通对象的属性一样被访问。</p>
<pre><code>localStorage[<span class="string">'hello'</span>] = <span class="string">'world'</span>
localStorage.hello <span class="comment">// 'world'</span>
localStorage.hello = <span class="string">'Chris'</span>
localStorage[<span class="string">'hello'</span>] <span class="comment">// 'Chris'</span>
</code></pre>

<h4><code>removeItem()</code> 和 <code>clear()</code></h4>
<p>一个删除单个，一个删除全部，不返回任何值，<code>key</code> 不存在时也不会报错。</p>
<h4><code>key(keyID)</code></h4>
<p>返回指定 ID 的 <code>key</code> 名字。</p>
<p><code>keyID</code> 只接受整数，因为会通过 <code>Math.floor(keyID)</code> 来转换，所以支持非整数，如 <code>&#39;1.1&#39;</code>、<code>&#39;1a&#39;</code> 和 <code>true</code> 等等，只是结果为 <code>NaN</code> 时取 <code>0</code>；若不存在，返回 <code>null</code>。</p>
<p>已知问题：</p>
<ul>
<li>Chrome v25 和 Firefox v19 的行为不一样：Chrome 会将 keys 按照字符串大小进行正排序，而 Firefox 则几乎是乱序，不可预测 <code>key</code> 的位置。</li>
</ul>
<pre><code>localStorage.setItem(<span class="string">'google'</span>, <span class="string">'what the hell?'</span>)
localStorage.setItem(<span class="string">'miscrosoft'</span>, <span class="string">'not bad'</span>)
localStorage.setItem(<span class="string">'apple'</span>, <span class="string">'great'</span>)

localStorage.key(<span class="number">0</span>) <span class="comment">// Chrome: apple</span>
localStorage.key(<span class="number">1</span>) <span class="comment">// Chrome: google</span>
</code></pre>

<h4><code>length</code></h4>
<p>返回 <code>key</code> 的总数。</p>
<h3>事件</h3>
<p>目前只支持一个事件：<code>storage</code>。</p>
<pre><code><span class="keyword">if</span> (window.addEventListener) {
  window.addEventListener(<span class="string">"storage"</span>, handle_storage, <span class="literal">false</span>);
} <span class="keyword">else</span> {
  window.attachEvent(<span class="string">"onstorage"</span>, handle_storage);
};
</code></pre>

<p>这段代码我偷懒从 <a href="http://diveintohtml5.info/storage.html">Dive Into HTML5</a> 搬过来的，专有的事件属性如下：</p>
<ul>
<li>key：不解释</li>
<li>oldValue：旧值</li>
<li>newValue：新值</li>
<li>url：页面的 URL</li>
</ul>
<p><code>url</code> 有点特殊，原来是叫 <code>uri</code> 的，所以要兼容某些浏览器的话，最好两个都判断，较新的标准浏览器应该没有这个问题。</p>
<p>此事件不可终止，并且只有在 <code>setItem()</code>、<code>removeItem()</code> 和 <code>clear()</code> 确实影响了值才会触发：</p>
<pre><code>localStorage.setItem(<span class="string">'hello'</span>, <span class="string">'world'</span>) <span class="comment">// will fire</span>
localStorage.clear() <span class="comment">// will fire</span>
localStorage.clear() <span class="comment">// will not fire</span>
</code></pre>

<p>另外，对触发页面的要求也很特别：<strong>会触发事件的页面并不是执行修改操作的页面，而是已打开的、共享同一个储存区的其他页面</strong>。</p>
<p>最后，事件绑定只能绑定在 <code>window</code> 上。</p>
<p><em>以上仅在 Chrome v25 和 Firefox v19 上测试过。</em></p>
</div><footer class="entry-footer"><time datetime="2013-03-28T19:31:58.000Z">Mar 29th, 2013</time><div class="tags"><a href="/tags/html5/">HTML5</a><a href="/tags/javascript/">JavaScript</a><a href="/tags/storage/">Storage</a><a href="/tags/localstorage/">localStorage</a><a href="/tags/sessionstorage/">sessionStorage</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="https://www.quora.com/Google-Reader-Shut-Down-March-2013/Why-is-Google-killing-Google-Reader/answer/Brian-Shih">&rarr;&nbsp;为什么 Google 要砍掉 Google Reader？</a></h2></header><div class="entry-content"><p>在 Google <a href="http://www.theverge.com/2013/3/13/4101144/google-shuts-down-reader-rss-aggregation-service">宣布</a>将会在 2013 年 7 月 1 日关闭 Google Reader 之后，Quora 就有了一个问题：「<a href="https://www.quora.com/Google-Reader-Shut-Down-March-2013/Why-is-Google-killing-Google-Reader">为什么 Google 要砍掉 Google Reader？</a>」。</p>
<p>曾经担任过 Reader PM 的 Brian Shih <a href="https://www.quora.com/Google-Reader-Shut-Down-March-2013/Why-is-Google-killing-Google-Reader/answer/Brian-Shih">回答说</a>：Google 会关闭 Reader，只是为了社交领域，比如 Google+，而在此之前，Google 已经<strong>三度尝试</strong>把 Reader 团队拉到社交产品的开发上：</p>
<ul>
<li>2008：OpenSocial</li>
<li>2009：Buzz</li>
<li>2010：Google+</li>
</ul>
<p>因为 Facebook 一直在影响着互联网广告市场，以广告为主要收入的 Google 自然不会放弃这块蛋糕，会进入社交领域属于必然之举。</p>
<p>而声称「不作恶」的 Google，并没有声称「不赚钱」，没有直接盈利又无法和社交媒体抗衡（毕竟不是一回事）的 Reader 自然没有运营下去的价值。因此，Google 的广告策略也备受吐槽，比如 Google Glass 的恶搞视频（<em><a href="http://youtu.be/_mRF0rBXIeg">YouTube</a>，<a href="http://v.youku.com/v_show/id_XNDIxMDQzODMy.html">优酷</a></em>）。</p>
<p>Reader 被砍掉确实让人难过，因为它不仅储存着很多不可访问的网站的文章，还有着成熟的第三方，不过天下无不散之筵席，所以并不需要太纠结于此，何况 Reeder、Feedly 甚至 Digg 都表示会做一些事情。</p>
<p>从某个角度来说，因 Reader 而停滞多年的 RSS 市场，可能会因此有难以想象的成长。</p>
<p>塞翁失马，焉知非福，不是吗？</p>
<a href="/post/why-is-google-killing-google-reader/" class="permalink">&infin;</a></div><footer class="entry-footer"><time datetime="2013-03-17T14:03:29.000Z">Mar 17th, 2013</time><div class="tags"><a href="/tags/google/">Google</a><a href="/tags/google-reader/">Google Reader</a><a href="/tags/rss/">RSS</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="http://daneden.me/animate/build/">&rarr;&nbsp;Animate.css: CSS 动画懒人包</a></h2></header><div class="entry-content"><p><a href="http://daneden.me/animate/build/">Animate.css</a> 打包了常见的 CSS 动画代码，只要勾上然后按按钮就直接下载打包好的 CSS 文件，然后在 HTML 代码里加上对应的 class 就可以，相当便利。</p>
<a href="/post/animate-css-builder/" class="permalink">&infin;</a></div><footer class="entry-footer"><time datetime="2013-03-12T10:34:01.000Z">Mar 12th, 2013</time><div class="tags"><a href="/tags/css/">CSS</a><a href="/tags/animation/">Animation</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="http://37signals.com/svn/posts/3432-why-i-loved-building-basecamp-for-iphone-in-rubymotion">&rarr;&nbsp;Why I loved building Basecamp for iPhone in RubyMotion</a></h2></header><div class="entry-content"><p>37signals 在最近发布 <a href="https://itunes.apple.com/us/app/basecamp-official-app/id599139477?mt=8">Basecamp for iPhone</a>，由于 37signals 是 Ruby 的坚定支持者，所以该 app 是由 <a href="http://www.rubymotion.com/">RubyMotion</a> 打造的，甚至开发工具也跳过了 Xcode。</p>
<p>在上架不久后，<a href="http://twitter.com/qrush">Nick</a> 发了<a href="http://37signals.com/svn/posts/3432-why-i-loved-building-basecamp-for-iphone-in-rubymotion">一篇文章</a>来说明他们是为什么选择和怎样使用 RubyMotion 打造这款应用。</p>
<h3>学习成本和 IDE 的缺陷</h3>
<p>Nick 对使用 Objective-C 开发应用的看法时：「如果使用 Objective-C，就意味着我需要抛弃我现有的工具和工作流，然后学习新的 API、框架和更多的东西（如 IDE）」，并且提到他早年使用 Visual Basic 控件和 Visual Studio 时的<strong>不好</strong>经验，因此非常抗拒使用 Xcode 和 Interface Builder。</p>
<p>我相当同意 Nick 的观点，就像 <a href="http://coffeescript.org/">CoffeeScript</a> 和 <a href="http://code.google.com/p/brython/">Brython</a> 和 JavaScript 的关系，对于 Ruby 或 Python 程序员来说，直接用前两者会少很多学习成本。</p>
<p>而 Xcode，说实话，稳定性还没 Visual Studio 好，在代码补全、文档、Interface Builder、应用发布等方面虽然会比一般编辑器要好，所以还能忍受缺陷，但如果有代替方案呢？</p>
<h3><a href="https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html">Auto Layout</a></h3>
<p>Auto Layout 是 iOS 6 新加的 API，为<del>马脸</del> iPhone 5 准备的：</p>
<pre><code><span class="comment">#</span> <span class="comment">horizontal</span>
<span class="comment">"|</span>-<span class="comment">10</span>-<span class="title">[</span><span class="comment">switchButton</span>]<span class="literal">-</span><span class="comment">10</span>-<span class="comment">|"</span> 
<span class="comment">"|</span>-<span class="comment">10</span>-<span class="title">[</span><span class="comment">helpButton</span>]<span class="literal">-</span><span class="comment">10</span>-<span class="comment">|"</span> 

<span class="comment">#</span> <span class="comment">vertical</span>
<span class="comment">"|</span>-<span class="comment">15</span>-<span class="title">[</span><span class="comment">switchButton</span>]<span class="literal">-</span><span class="comment">10</span>-<span class="title">[</span><span class="comment">helpButton(==switchButton)</span>]<span class="literal">-</span><span class="comment">15</span>-<span class="comment">|"
</code></pre>

<h3>第三方框架和类库</h3>
<p>Nick 吐槽了 Objective-C 第三方框架和类库令人不满的现状：</p>
<ul>
<li>（相对于 Ruby）没有令人满意的依赖管理工具，<a href="http://cocoapods.org/">CocoaPods</a> 做得很好，可是还不够</li>
<li>大部分不在 CocoaPods 的框架或类库的 README 只是简单地使用「拖曳 <code>.xcodeproj</code> 文件到 Xcode」或「拖曳 <code>.h</code> 和 <code>.m</code> 文件到你的项目」等等让人头痛的说明（谁叫你不用 Xcode :P）</li>
</ul>
<p>CocoaPods 我也有在用，虽然它让使用第三方框架和类库变得简单了一些，但并不是很完美，如果能像 RubyGems 或 Node Packaged Modules 那样的话，就真的真的 save my ass 了。</p>
<h3>调试</h3>
<p>37signals 是使用 <code>rake</code> 和 <a href="http://www.rubymotion.com/developer-center/articles/testflight/">TestFlight</a> 来进行调试，而 RubyMotion 官方也提供了<a href="http://www.rubymotion.com/developer-center/articles/debugging/">如何调试的指南</a>。</p>
<p>因为最近多了一些 iOS 的调试器，都很逆天的感觉，比如 <a href="http://shopify.github.com/superdb/">SuperDB</a>，所以在调试方面，可能脱离 Xcode 也不会造成很大的问题。</p>
<a href="/post/why-i-loved-building-basecamp-for-iphone-in-rubymotion/" class="permalink">&infin;</a></div><footer class="entry-footer"><time datetime="2013-02-19T08:43:35.000Z">Feb 19th, 2013</time><div class="categories"><a href="/categories/ruby/">Ruby</a></div><div class="tags"><a href="/tags/ruby/">Ruby</a><a href="/tags/objective-c/">Objective-C</a><a href="/tags/dev/">Dev</a><a href="/tags/ios/">iOS</a><a href="/tags/rubymotion/">RubyMotion</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="/post/hexo-rocks/">迁移到 Hexo</a></h2></header><div class="entry-content"><p>忙了两天，终于从 <a href="http://octopress.org">Octopress</a> 迁移到 <a href="http://zespia.tw/hexo/">Hexo</a> 了，订阅的朋友，如果收到了重复的更新请见谅。</p>
<p>迁移的过程中，最困难的是想要尽可能兼容原本在 <a href="">Octopress</a> 能用的东西，比如 linklog 的自定义样式。除此之外，真的深刻地感受到 Hexo 的优点，V8 引擎的快就不必说了，使用的 Stylus 和 EJS 都让人觉得舒服。Jekyll 抱着 Liquid 不放真是一大败笔。</p>
<p>接下来就是要为 Hexo 写一些插件，比如压缩 HTML，来达到最大的自定义。</p>
</div><footer class="entry-footer"><time datetime="2013-02-04T11:08:08.000Z">Feb 4th, 2013</time><div class="tags"><a href="/tags/hexo/">Hexo</a><a href="/tags/jekyll/">Jekyll</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="http://thegoodman.cc/">&rarr;&nbsp;The Good Man Project</a></h2></header><div class="entry-content"><p><a href="http://thegoodman.cc/">The Good Man</a> is a project shows the capacity of CSS3 animations as <strong>an animation tool</strong>.</p>
<p>This project is built only by HTML, CSS3, web fonts and shapes, without images.</p>
<p>Although it&#39;s pretty amazing, but there are still some things that need to be concerned:</p>
<ul>
<li>Firefox 18: animations work well, but the positions of elements are incorrect;</li>
<li>Chrome 24: most of the time, the performance is fine, no lags, very smooth, but not all the time;</li>
<li>The audio may be interrupted, and if it happends, you&#39;ll lose all sounds. Need a solution to detect download states and redownload if interrupted.</li>
</ul>
<a href="/post/the-good-man-project/" class="permalink">&infin;</a></div><footer class="entry-footer"><time datetime="2013-02-01T08:20:00.000Z">Feb 1st, 2013</time><div class="tags"><a href="/tags/css/">CSS</a></div></footer></article><article class=""><header class="entry-header"><h2 class="title"><a href="/post/load-css-and-javascript-in-special-ways/">优化 CSS 和 JavaScript 请求数的另类方法</a></h2></header><div class="entry-content"><p><a href="http://hancic.info/">Jan Hančič</a> 公布了一个在一次请求里同时加载 CSS 和 JavaScript 的方案，<a href="http://janhancic.github.com/platypus.js/">platypus.js</a>。</p>
<p>实现原理是利用 CSS 的 <code>content</code> 属性，把 JavaScript 转换成 base64 字符串放进去，再动态插入 DOM。</p>
<p>示例 CSS：</p>
<pre><code><span class="id">#platypus-0</span> <span class="rules">{
  <span class="rule"><span class="attribute">display</span>:<span class="value"> none;</span></span>
  <span class="rule"><span class="attribute">content</span>:<span class="value"> 	<span class="string">'YWxlcnQoJ0hpLCBteSBmcmllbmQhIEZyb20gQ2hyaXMnKQo='</span>;</span></span>
<span class="rule">}</span></span>
</code></pre>

<p>示例 JS：</p>
<pre><code>(<span class="function"><span class="keyword">function</span> <span class="params">( document )</span> {</span>
  <span class="keyword">var</span> linkTags = document.querySelectorAll ( <span class="string">'link[rel="stylesheet"]'</span> );
  <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; linkTags.length; i++ ) {
    <span class="keyword">var</span> dummyDiv = document.createElement ( <span class="string">'div'</span> );
    dummyDiv.id = <span class="string">'platypus-'</span> + i;
    document.body.appendChild ( dummyDiv );

    <span class="keyword">var</span> styles = document.defaultView.getComputedStyle ( dummyDiv, <span class="literal">null</span> );
    <span class="keyword">var</span> js = styles.getPropertyValue ( <span class="string">'content'</span> ); <span class="comment">// w3c</span>
    <span class="comment">//backgroundImage = someElement.currentStyle["background-image"]; //IE</span>
    <span class="keyword">if</span> ( js === <span class="string">''</span> ) {
      <span class="keyword">continue</span>;
    }

    dummyDiv.parentNode.removeChild ( dummyDiv );

    <span class="keyword">if</span> ( js[<span class="number">0</span>] === <span class="string">"'"</span> || js[<span class="number">0</span>] === <span class="string">'"'</span> ) {
      js = js.substr ( <span class="number">1</span>, js.length - <span class="number">2</span> );
    }

    <span class="keyword">var</span> scriptTag = document.createElement ( <span class="string">'script'</span> );
    <span class="comment">// window.atob - decode base64 string, unavailable on IE9-, MDN says IE10 supports it</span>
    scriptTag.innerHTML = atob ( js );
    document.body.appendChild ( scriptTag );
  };
} ( document ) );
</code></pre>

<p>按照 Jan 的说法，platypus.js 兼容非兼容视图的 IE9，大致上主流的桌面、移动浏览器都可以兼容。</p>
<p>这个方案很有意思，虽然 CSS 文件的大小增加了，但在越来越快的带宽和越来越好的 CDN 的影响下，DNS Lookup、Connecting 和 Wating 的消耗说不定比多出的部分少不了多少，特别是小文件。</p>
<p>我也想过利用 <code>localStorage</code> 来实现类似 <code>manifest</code> 的效果，简单的示例代码如下：</p>
<pre><code><span class="keyword">var</span> load = (<span class="keyword">function</span>() {
  <span class="keyword">var</span> insertToDOM, getSource

  insertToDOM = <span class="keyword">function</span>( content ) {
    <span class="keyword">var</span> script = document.createElement( <span class="string">'script'</span> )
    script.textContent = content
    document.body.appendChild( script )
  }

  getSource = <span class="keyword">function</span>( file ) {
    <span class="keyword">var</span> source = localStorage.getItem( file )
    <span class="keyword">if</span> (<span class="keyword">typeof</span> source !== <span class="string">'string'</span>) {
      <span class="comment">// if no record, get source from server</span>
      $.ajax( {
        url: file,
        success: <span class="keyword">function</span>( data ) {
          localStorage.setItem( file, data )
          insertToDOM( data )
        }
      } )
    } <span class="keyword">else</span> {
      insertToDOM( source )
    }
  }

  <span class="keyword">return</span> <span class="keyword">function</span>(files) {
    files.forEach( <span class="keyword">function</span>( file ) {
      getSource( file )
    })
  };
})();

load( [<span class="string">'//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js'</span>,
  <span class="string">'script.js'</span>] )
</code></pre>

<p>特点：</p>
<ul>
<li>可以支持很多文件，理论上能用 Data URI 加载的都可以；</li>
<li><code>localStorage</code> 的访问速度远远快于 DNS Lookup 等消耗；</li>
<li><code>localStorage</code> 默认能支持最大 4MB 的储存，对于大部分站点完全足够；</li>
<li>把脚本封装成 <code>(fn)()</code> 的形式并在底部插入特定的变量可判断版本、是否加载完成等，便于控制；</li>
<li>可控性和易用性高于 <code>manifest</code>，不需要配置服务器，需要清空时操作 <code>localStorage</code> 即可，而 <code>localStorage</code> 的存储持久性和 <code>manifest</code> 基本一样。</li>
</ul>
<p>只不过，这种做法和 AMD、CommonJS 等规范不太合拍——至少我还没想到好做法——小团队项目开发似乎挺不错，暂时只是草稿性质的想法。</p>
</div><footer class="entry-footer"><time datetime="2013-01-27T13:43:00.000Z">Jan 27th, 2013</time><div class="tags"><a href="/tags/css/">CSS</a><a href="/tags/javascript/">JavaScript</a><a href="/tags/performance/">Performance</a><a href="/tags/web-development/">Web Development</a></div></footer></article><nav class="pagination"><a href="/page/2/" class="next">Next</a><a href="/archives" class="archives">Archives</a></nav></div><footer id="footer" class="inner page-footer"><Copyright>© 2013&nbsp;Chris Yip</Copyright></footer>